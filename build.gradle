plugins {
  id "java"
  id "java-library"
}

repositories {
  mavenCentral()
}

subprojects { project ->

  apply plugin: "java"
  apply plugin: "java-library"
  sourceCompatibility = JavaVersion.VERSION_21
  targetCompatibility = JavaVersion.VERSION_21
  compileJava.options.encoding = 'UTF-8'
  compileTestJava.options.encoding = 'UTF-8'

  repositories {
    mavenCentral()
  }

  task makeServiceFile(type: Copy) {
    dependsOn "compileJava"
    from "$buildDir/classes/java/main/META-INF/services"
    into "$projectDir/src/main/resources/META-INF/services"
  }
}
